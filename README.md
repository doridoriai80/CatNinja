# 강아지 닌자 대모험

## 🎮 게임 소개

강아지 닌자 대모험은 Python과 Pygame을 사용하여 만든 2D 횡스크롤 액션 게임입니다. 플레이어는 강아지 닌자가 되어 고양이들을 처치하고 최종 보스를 물리치는 것이 목표입니다.

## 🚀 주요 기능

- **메뉴 시스템**: 게임 시작 전 조작법 안내
- **다양한 고양이 적**: 3가지 색상(노란색, 검은색, 흰색)의 고양이들이 랜덤으로 출현
  - **노란 고양이**: 작고 빠름, 낮은 체력
  - **검은 고양이**: 보통 크기와 속도, 중간 체력
  - **흰 고양이**: 크고 느림, 높은 체력, **점프하면서 이동**
- **보스 전투**: 모든 고양이를 처치한 후 보스 고양이 출현
- **파워업 시스템**: 간식을 먹으면 이중 수리검 발사 가능
- **한글 지원**: 완전한 한글 UI 및 폰트 지원
- **시각적 개선**: 실제 이미지 파일 사용 (수리검, 돌, 고양이 등)

## 📋 요구사항

- Python 3.7 이상
- Pygame 2.0 이상

## 🛠️ 설치 방법

1. 저장소 클론 또는 다운로드
```bash
git clone [repository-url]
cd catninja
```

2. 가상환경 생성 및 활성화 (권장)
```bash
python -m venv catninja
source catninja/bin/activate  # macOS/Linux
# 또는
catninja\Scripts\activate  # Windows
```

3. 필요한 패키지 설치
```bash
pip install pygame
```

## 🎯 게임 실행

```bash
python main.py
```

## 🎮 조작법

| 키 | 동작 |
|---|---|
| **← →** | 좌우 이동 |
| **스페이스바** | 점프 |
| **Z** | 수리검 발사 |
| **R** | 게임 재시작 |
| **M** | 메뉴로 돌아가기 |

## 🎲 게임 규칙

### 목표
- 설정된 수의 고양이를 모두 처치
- 최종 보스 고양이를 물리쳐 게임 클리어

### 게임 진행
1. **메뉴 화면**: 스페이스바를 눌러 게임 시작
2. **고양이 처치**: 설정된 수의 고양이가 순차적으로 출현
3. **보스 전투**: 모든 고양이 처치 후 보스 출현
4. **게임 클리어**: 보스 처치 시 게임 클리어

### 파워업
- **간식**: 초록색 간식을 먹으면 일정 시간 동안 이중 수리검 발사 가능
- **효과 지속시간**: 10초간 이중 수리검 발사

### 게임 오버 조건
- 고양이와 충돌
- 보스가 던진 돌에 맞음

## 🎨 게임 요소

### 플레이어 (강아지 닌자)
- 좌우 이동 및 점프 가능
- 수리검 발사로 적 공격
- 간식 효과로 이중 수리검 발사

### 적 (고양이들)
- **일반 고양이**: 3가지 색상, 각각 다른 체력과 특성
  - 노란색 고양이: 낮은 체력, 빠른 속도
  - 검은색 고양이: 중간 체력, 보통 속도  
  - 흰색 고양이: 높은 체력, 느린 속도, **점프하면서 이동**
- **보스 고양이**: 최종 보스, 돌을 던져 공격

### 아이템
- **간식**: 초록색 간식, 이중 수리검 효과
- **Puppy**: 강아지 아이템, 1회 방어 효과 (적/돌과 충돌 시 자동 방어 및 제거)

### 장애물
- **돌**: 보스 고양이가 던지는 장애물, 맞으면 게임 오버

## 📁 파일 구조

```
catninja/
├── main.py          # 메인 게임 파일
├── config.py        # 게임 설정 파일
├── assets/
│   ├── player.png   # 플레이어 (강아지 닌자) 이미지
│   ├── cat_black.png # 검은 고양이 적 이미지
│   ├── cat_white.png # 흰 고양이 적 이미지
│   ├── cat_yellow.png # 노란 고양이 적 이미지
│   ├── cat_boss.png # 보스 고양이 이미지
│   ├── snack.png    # 간식 아이템 이미지
│   ├── puppy.png    # 강아지 방어 아이템 이미지
│   ├── shuriken.png # 수리검 이미지
│   └── stone.png    # 보스 돌 이미지
└── README.md        # 이 파일
```

## ⚙️ 설정 파일 (config.py)

게임의 다양한 설정값들을 config.py 파일에서 조정할 수 있습니다:

### 기본 설정
- 화면 크기 (WIDTH, HEIGHT)
- 플레이어 속도 및 점프력
- 적 생성 간격
- 수리검 속도
- 각종 색상 설정

### 고급 설정
- **플레이어 충돌 판정 마진**: `PLAYER_TOUCH_MARGIN` - 충돌 판정의 여유 범위
- **흰색 고양이 점프 설정**:
  - `WHITE_CAT_JUMP_INTERVAL`: 점프 간격 (밀리초)
  - `WHITE_CAT_JUMP_VELOCITY`: 점프 속도
  - `WHITE_CAT_GRAVITY`: 중력 효과
- **Stone 위치 설정**:
  - `STONE_SPAWN_OFFSET_X`: 보스 중심에서 X축 오프셋
  - `STONE_SPAWN_OFFSET_Y`: 보스 바닥에서 Y축 오프셋
- **Puppy 방어 설정**:
  - `PUPPY_DEFENSE_COUNT`: 방어 횟수 (1회)
  - `PUPPY_DISPLAY_SIZE`: 플레이어와 함께 표시될 때의 크기
  - `PUPPY_SPAWN_MIN_INTERVAL`: 최소 스폰 간격 (밀리초)
  - `PUPPY_SPAWN_MAX_INTERVAL`: 최대 스폰 간격 (밀리초)
- **보스 HP 표시 설정**:
  - `BOSS_HP_BAR_WIDTH`: HP 바 너비
  - `BOSS_HP_BAR_HEIGHT`: HP 바 높이
  - `BOSS_HP_BAR_MARGIN`: 오른쪽 여백

## 🐛 문제 해결

### 한글이 깨져서 표시되는 경우
- macOS: AppleGothic 폰트 자동 사용
- Windows: Malgun Gothic 폰트 자동 사용
- 폴백: Arial 폰트 사용

### 이미지가 로드되지 않는 경우
- assets 폴더에 필요한 이미지 파일들이 있는지 확인
- 파일 권한 확인

## 🔧 최근 수정사항

### v1.3.0 (2025-08-12)
#### 🛡️ Puppy 방어 시스템 완성
- **방어 아이템**: puppy를 얻으면 1회 방어 가능
- **자동 방어**: 적, 보스, 돌과 충돌 시 자동으로 방어 효과 적용
- **적 제거**: 방어 효과 적용 시 충돌한 적/돌 자동 제거
- **시각적 표시**: 플레이어 오른쪽에 puppy 이미지 표시
- **UI 상태 표시**: "방어 효과: 활성화/비활성화" 상태 표시

#### 🎯 보스 HP 표시 개선
- **위치 변경**: 보스 HP를 오른쪽 상단에 표시
- **UI 균형**: 왼쪽(스테이지 정보) vs 오른쪽(보스 정보) 배치
- **설정 가능**: config.py에서 HP 바 크기와 여백 조정 가능

#### 🎲 Puppy 랜덤 스폰 시스템
- **랜덤 간격**: 3-8초 사이의 랜덤한 간격으로 puppy 스폰
- **예측 불가능**: 매번 다른 타이밍으로 더 흥미로운 게임플레이
- **설정 가능**: 최소/최대 스폰 간격을 config.py에서 조정 가능

#### 🐛 버그 수정 및 개선
- **충돌 감지 개선**: 정확한 충돌 감지로 방어 효과 안정화
- **Puppy 스폰 버그 수정**: puppy 획득 후 고양이 스폰에 영향 없도록 수정
- **타이머 분리**: puppy와 간식 스폰 타이머 완전 분리
- **디버깅 로그**: 상세한 로그로 게임 상태 추적 가능

#### ⚙️ 설정 옵션 추가
- **Puppy 방어 설정**: 방어 횟수, 표시 크기, 스폰 간격 조정
- **보스 HP 표시 설정**: HP 바 크기, 여백, 위치 조정
- **랜덤 스폰 설정**: 최소/최대 스폰 간격 조정

### v1.2.0 (2025-08-12)
#### 🎨 시각적 개선
- **게임 제목 변경**: "개 닌자 횡스크롤" → "개 닌자 대모험"
- **게임 제목 폰트 크기 증가**: 48픽셀 크기로 확대
- **수리검 이미지 적용**: `shuriken.png` 이미지 사용
- **보스 돌 이미지 적용**: `stone.png` 이미지 사용

#### 🎮 게임플레이 개선
- **흰색 고양이 점프 시스템**: 점프하면서 이동하는 특별한 동작 추가
- **Stone 위치 설정**: config.py에서 보스가 던지는 돌의 생성 위치 조정 가능
- **충돌 판정 개선**: 플레이어 충돌 판정 마진 설정으로 더 자연스러운 게임플레이

#### ⚙️ 설정 옵션 추가
- **점프 관련 설정**: 흰색 고양이의 점프 간격, 속도, 중력 조정 가능
- **Stone 위치 오프셋**: X, Y축 방향으로 돌 생성 위치 세밀 조정

### v1.1.0 (2025-08-10)
#### 🐛 버그 수정
- **충돌 감지 오류 수정**: 빈 스프라이트 그룹에 대한 충돌 감지 시 발생하는 pygame 오류 해결
- **EnemyCat 클래스 초기화 오류 수정**: `rect` 속성이 초기화되지 않아 충돌 감지가 작동하지 않는 문제 해결

#### 🛡️ 안전성 개선
- 모든 충돌 감지 코드에 안전 검사 추가
  - `enemies` 그룹이 비어있지 않을 때만 충돌 감지 수행
  - `stones` 그룹이 비어있지 않을 때만 충돌 감지 수행
  - `items` 그룹이 비어있지 않을 때만 충돌 감지 수행

#### 🎮 게임플레이 개선
- 게임 리셋 시 안정성 향상
- 스테이지 전환 시 충돌 감지 오류 방지
- 스테이지 시작 메시지 표시 (3초간)

#### 📝 코드 품질 개선
- `EnemyCat` 클래스 메서드 구조 정리
- `__init__` 메서드에서 모든 속성 초기화 보장
- 헬퍼 메서드(`get_color`, `get_hp`) 분리 및 정리

### v1.0.0 (초기 릴리즈)
- 기본 게임 기능 구현
- 메뉴 시스템 및 게임 상태 관리
- 고양이 적 및 보스 시스템
- 파워업 시스템 (간식 효과)
- 한글 UI 지원

## 🤝 기여하기

버그 리포트나 기능 제안은 이슈를 통해 제출해주세요.

## 📄 라이선스

이 프로젝트는 MIT 라이선스 하에 배포됩니다.

---

**즐거운 게임 되세요! 🎮**
